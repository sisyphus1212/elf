
# Vim 快速入门

* [用 cscope+vim 演示如何分析 glibc: _start ->__libc_start_main](http://showterm.io/653728e098cd9cd1bcf6d)

## 打开文件

在命令行下输入 `vim 文件名` 即可打开一个新文件并进入 Vim 的“编辑模式”。

编辑模式可以切换到命令模式（按下字符 `:`）和插入模式（按下字母 `a/A/i/I/o/O/s/S/c/C` 等或者 Insert 键）。

编辑模式下，Vim 会把键盘输入解释成 Vim 的编辑命令，以便实现诸如字符串查找(按下字母 `/`)、文本复制（按下字母 `yy`）、粘贴（按下字母 `pp`）、删除（按下字母 `d` 等）、替换（`s`）等各种操作。

当按下 `a/A/i/I/o/O/s/S/c/C` 等字符时，Vim 先执行这些字符对应命令的动作（比如移动光标到某个位置，删除某些字符），然后进入插入模式；进入插入模式后可以通过按下 ESC 键或者是 `CTRL+C` 返回到编辑模式。

在编辑模式下输入冒号 `:` 后可进入命令模式，通过它可以完成一些复杂的编辑功能，比如进行正则表达式匹配替换，执行 Shell 命令（按下 `!` 命令）等。

实际上，无论是插入模式还是命令模式都是编辑模式的一种。而编辑模式却并不止它们两个，还有字符串查找、删除、替换等。

需要提到的是，如果在编辑模式按下字母 `v/V` 或者是 `CTRL+V`，可以用光标选择一个区块，进而结合命令模式对这一个区块进行特定的操作。

## 编辑文件

打开文件以后即可进入编辑模式，这时可以进行各种编辑操作，包括插入、复制、删除、替换字符。其中两种比较重要的模式经常被“独立”出来，即上面提到的插入模式和命令模式。
 
## 保存文件

在退出之前需切换到命令模式，输入命令 `w` 以便保存各种编辑后的内容，如果想取消某种操作，可以用 `u` 命令。如果打开 Vim 编辑器时没有设定文件名，那么在按下 `w` 命令时会提示没有文件名，此时需要在 `w` 命令后加上需要保存的文件名。
 
## 退出/关闭

保存好内容后就可退出，只需在命令模式下键入字符 `q`。如果对文件内容进行了编辑，却没有保存，那么 Vim 会提示，如果不想保存之前的编辑动作，那么可按下字符 `q` 并且在之后跟上一个感叹号`!`，这样会强制退出，不保存最近的内容变更。

## 命令模式
 
这里需要着重提到的是 Vim 的命令模式，它是 Vim 扩展各种新功能的接口，用户可以通过它启用和撤销某个功能，开发人员则可通过它为用户提供新的功能。下面主要介绍通过命令模式这个接口定制 Vim 以便我们更好地进行源代码的编辑。

## 常用快捷键

  说明           | Vim           | Bash
  ---------------|---------------|--------------------------
  行首/行尾      | `^/$`         | `Ctrl + a/e`
  前进/后退一个字| `w/b`         | `Ctrl + Home/end`
  向后剪切一个字 | `db`          | `Alt  + Delete/backspace`
  向前剪切一个字 | `dw`          | `Alt  + d`
  剪切光标前所有 | `d^`          | `Ctrl + u`
  剪切光标后所有 | `d$`          | `Ctrl + k`
  粘帖剪切的内容 | `p`           | `Ctrl + y`

## vim+cscope

把该目录下的 .vimrc 追加到 `~/.vimrc` 后，可以使用快捷键查看代码：

    $ sudo apt-get install cscope
    $ cd 01-init/hello-c
    $ csope -Rbkq
    $ vim
    :cs find g main

快捷键映射表，可以自行修改：

    \ : cs find g
    s : cs find s
    t : cs find t
    c : cs find c
    C : cs find d
    f : cs find f

## 参考资料

* <http://vimsheet.com/>
* <http://cenalulu.github.io/linux/all-vim-cheatsheat/>
